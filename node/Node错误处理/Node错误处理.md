1. 操作失败和程序员的失误
把错误处理分成两大类:
- 操作失败：是正确编写程序在运行时产生的错误，并不是程序的Bug。
* 连接不到主机
* 无法解析主机名
* 无效用户输入
* 请求超时
* 服务器返回500
* 套接字被挂起
* 系统内存不足

- 程序员失误： 程序里面的bug,这些错误可以通过修改代码避免。
* 读取undefined的一个属性
* 读取异步函数没有制定回调
* 该传对象的时候传一个字符串

把操作失败和程序员的失误都称为“错误”，其实根本是不一样的，操作失败是所有正确的程序应该处理的错误情形。只要被妥善处理它们不一定会预示着Bug或者严重的问题。“文件找不到”是一个操作失败，但是并不意味者哪里出错了，可能代表者程序如果想用一个文件则要事先创建它。

相反，程序员失误是一个彻底的bug,忘记验证用户输入，写错变量名等等。这样的错误无法被处理。如果可以则意味着，你用错误的代码代替了出错的代码。

2. 处理操作失败
给的一个错误，我们可以做如下操作:
- 直接处理。
- 把错误扩展给客户端
- 重试操作
- 直接崩溃
- 记录错误，其他什么都不做

2. 编写函数的实践
- Throw
- Callback
- EventEmitter
使用场景取决于
- 这是操作失败还是程序员的失误？
- 这个函数本身是同步还是异步的？

操作失败的准则是：可以同步传递错误(抛出来)，也可以异步传递错误(通过传给一个回调函数或者触发EventEmitter的 error事件),但是不能同时使用。
程序员的失误，其实是个Bug。程序员的失误永远不应该被处理。